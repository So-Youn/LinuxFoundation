# Linux Filesystem Tree

## FSH 

> Filesystem Hierarchy Standard (FHS)

```shell
[root@localhost /]# ls
bin   dev  home  lib64  mnt  proc  run   srv  tmp  var
boot  etc  lib   media  opt  root  sbin  sys  usr
```

| DIRECTORY  | PURPOSE                                                      |
| :--------- | :----------------------------------------------------------- |
| **/**      | Primary directory of the entire filesystem hierarchy.        |
| **/bin**   | Essential executable programs that must be available in **single user mode**. |
| **/boot**  | Files needed to boot the system, such as the kernel, **initrd** or **initramfs** images, and boot configuration files and bootloader programs. |
| **/dev**   | Device Nodes, used to interact with hardware and software devices. |
| **/etc**   | System-wide configuration files.                             |
| **/home**  | User home directories, including personal settings, files, etc. |
| **/lib**   | Libraries required by executable binaries in **/bin** and **/sbin**. |
| **/lib64** | 64-bit libraries required by executable binaries in **/bin** and **/sbin**, for systems which can run both 32-bit and 64-bit programs. |
| **/media** | Mount points for removable media such as CDs, DVDs, USB sticks, etc. |
| **/mnt**   | Temporarily mounted filesystems.                             |
| **/opt**   | Optional application software packages.                      |
| **/proc**  | Virtual pseudo-filesystem giving information about the system and processes running on it. Can be used to alter system parameters. |
| **/run**   | Run-time variable data, containing information describing the system since it was booted. Replaces the older **/var/run**. |
| **/sys**   | Virtual pseudo-filesystem giving information about the system and processes running on it. Can be used to alter system parameters. Similar to a device tree and is part of the Unified Device Model.<br /> device, driver,kernel module, system configuration에 대한 정보를 포함한다. |
| **/root**  | Home directory for the root user.                            |
| **/sbin**  | Essential system binaries.                                   |
| **/srv**   | Site-specific data served up by the system. Seldom used.     |
| **/tmp**   | Temporary files; on many distributions lost across a reboot and may be a ramdisk in memory. |
| **/usr**   | Multi-user applications, utilities and data; theoretically read-only. |
| **/var**   | Variable data that changes during system operation.          |

### Root (/)

* `root` 파티션에는 시스템을 부팅한 다음  모든 파일 시스템을 마운트하는 데 필요한 모든 필수 파일이 포함
* `/`는 `/root` 가 아니다. (`/root`는 수퍼유저인 root의 홈 디렉토리)

### /bin

* executable programs and scripts
  * **cat**, **chgrp**, **chmod**, **chown**, **cp**, **date**, **dd**, **df**, **dmesg**, **echo**, **false**, **hostname**, **kill**, **ln**, **login**, **ls**, **mkdir**, **mknod**, **more**, **mount**, **mv**, **ps**, **pwd**, **rm**, **rmdir**, **sed**, **sh**, **stty**, **su**, **sync**, **true**, **umount** and **uname**
  * 선택적으로 **csh** , **ed** , **tar** , **cpio** , **gunzip** , **zcat** , **netstat** 및 **ping** 포함

### /sbin

* booting, restoring, repairing을 위한 필수적인 binary 파일들

  * **fdisk**, **fsck**, **getty**, **halt**, **ifconfig**, **init**, **mkfs**, **mkswap**, **reboot**, **route**, **swapon**, **swapoff**, **update**.

  * 필요에 따라 `/usr`, `/home`에 filesystem을 마운트할 수 있다.

    ```shell
    [root@localhost ~]# ls -l /sbin
    lrwxrwxrwx. 1 root root 8  4월  8 13:38 /sbin -> usr/sbin
    ```

### /proc

* disk가 아닌 memory에만 있는 pseudo-filesystem.

```shell
[root@localhost proc]# ls
1     1273  17    2     2148  2235  23    2339  2382  2476  2531  276  31    381  391  508    564    578  7    730  782        bus        execdomains  key-users   modules       self           tty
10    13    1706  20    2162  2236  2300  2340  2390  2477  2543  277  315   382  4    55412  56458  581  701  731  8          cgroups    fb           keys        mounts        slabinfo       uptime
1021  14    1771  2006  2167  2248  2307  2344  2394  2478  2548  283  32    383  41   55416  56679  6    703  732  822        cmdline    filesystems  kmsg        mpt           softirqs       version
...
```



### /boot

* system을 부팅하기 위한 필수 파일

  * `vmlinuz` : the compressed linux kernel
  * `initramfs` : initial RAM filesystem

  ```shell
  [root@localhost boot]# ls -al
  합계 126328
  dr-xr-xr-x.  5 root root     4096  4월  8 13:49 .
  dr-xr-xr-x. 17 root root      224  4월  8 13:48 ..
  -rw-r--r--.  1 root root      167 10월 20  2020 .vmlinuz-3.10.0-1160.el7.x86_64.hmac
  -rw-------.  1 root root  3616707 10월 20  2020 System.map-3.10.0-1160.el7.x86_64
  -rw-r--r--.  1 root root   153591 10월 20  2020 config-3.10.0-1160.el7.x86_64
  drwx------.  3 root root       17  7월 29  2020 efi
  drwxr-xr-x.  2 root root       27  4월  8 13:39 grub
  drwx------.  5 root root       97  4월  8 13:49 grub2
  -rw-------.  1 root root 79725617  4월  8 13:45 initramfs-0-rescue-2fababc0886c4cbdb2432410b123db4a.img
  -rw-------.  1 root root 31985006  4월  8 13:49 initramfs-3.10.0-1160.el7.x86_64.img
  -rw-r--r--.  1 root root   320648 10월 20  2020 symvers-3.10.0-1160.el7.x86_64.gz
  -rwxr-xr-x.  1 root root  6769256  4월  8 13:45 vmlinuz-0-rescue-2fababc0886c4cbdb2432410b123db4a
  -rwxr-xr-x.  1 root root  6769256 10월 20  2020 vmlinuz-3.10.0-1160.el7.x86_64
  ```

  * Linux 배포판 및 kernel version 따라서 다른 이름을 가진다.

### /dev

* **device nodes**(시스템에 내장되거나 연결된 장치)라고 알려진 **device files**를 포함하는 디렉토리
  * network device는 device node는 가지고 있지 않으나, 대신에 eth1, wlan0 과 같은 이름을 가진다.

<img src="images/w6mxi8dgarwb-device_node.png" alt="Device Nodes" style="zoom:67%;" />

### /etc

* /etc는 machine-local configuration files, startup scripts를 포함

  * **csh.login**, **exports**, **fstab**, **ftpusers**, **gateways**, **gettydefs**, **group**, **host.conf**, **hosts.allow**, **hosts.deny**, **hosts,equiv**, **hosts.lpd**, **inetd.conf**, **inittab**, **issue**, **ld.so.conf**, **motd**, **mtab**, **mtools.conf**, **networks**, **passwd**, **printcap**, **profile**, **protocols**, **resolv.conf**, **rpc**, **securetty**, **services**, **shells**, **syslog.conf**.

  * `/etc/systemd`

    systemd를 사용할 때 시스템 서비스를 시작, 중지하기 위한 구성스크립트를 포함하거나 가리킨다.

    ```shell
    [root@localhost etc]# ls /etc/systemd
    bootchart.conf  coredump.conf  journald.conf  logind.conf  system  system.conf  user  user.conf
    ```

  * `/etc/init.d`:

    System V 초기화를 사용할 때 시작 및 종료 스크립트가 포함되어 있음

    ```shell
    [root@localhost etc]# ls /etc/init.d
    README  functions  netconsole  network
    ```

### /lib

* /bin 및 /sbin의 binary를 실행하는데 필요한 라이브러리 포함된다.

  * 커널 모듈(장치 또는 파일 시스템 드라이버) 

    ```shell
    [root@localhost modules]# ls /lib/modules/
    3.10.0-1160.el7.x86_64
    ```

### /mnt

* 시스템 관리자가 일시적으로 필요에 따라 mount할 수있다.
* 일반적으로 /media아래의 mount된 파일들에 사용된다.

### /var

* 시스템 작동 중에 자주 변경되는 가변(또는 휘발성) 데이터 파일
  * Log files
  * Spool directories and files
  * Administrative data files
  * Transient and temporary files, such as cache contents.
* `/var`는 read-only 로 mount 될 수 없다. 

| SUBDIRECTORY   | PURPOSE                                                      |
| :------------- | :----------------------------------------------------------- |
| **/var/ftp**   | Used for ftp server base                                     |
| **/var/lib**   | Persistent data modified by programs as they run             |
| **/var/lock**  | Lock files used to control simultaneous access to resources  |
| **/var/log**   | Log files                                                    |
| **/var/mail**  | User mailboxes                                               |
| **/var/run**   | Information about the running system since the last boot     |
| **/var/spool** | Tasks spooled or waiting to be processed, such as print queues |
| **/var/tmp**   | Temporary files to be preserved across system reboot. Sometimes linked to **/tmp** |
| **/var/www**   | Root for website hierarchies                                 |



## Size of the Linux Directories

> **du** : system의 top-level 디렉토리의 전체적인 size를 계산해준다.

```shell
[root@localhost log]# du -sh *
```

